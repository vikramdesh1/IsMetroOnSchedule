<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Is Metro On Schedule?</title>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  
  <script>
    
  $(document).ready(function() {
    $("#header").fadeIn(1000, function(){
      $.ajax({
      url: "https://api.wmata.com/Incidents.svc/json/Incidents",
      beforeSend: function(xhrObj) {
        xhrObj.setRequestHeader("api_key", "44e1abafef1145eebc44b74164f4125d");
        //This uses WMATA's demo key
      },
      type: "GET"
    })
    .done(function(data) {
      console.log(data.Incidents);
      if (data.Incidents.length > 0) {
        $('#test').text("No, there are currently " + data.Incidents.length + " issue(s) on Metro.");
      } else {
        $('#test').text("Yes, all trains appear to be running on time.");
      }
    })
    .fail(function() {
      console.log("Something went wrong...")
      $('#test').text("A problem occured while checking for incidents. Please try again later.");
    });
    });
});

    
  </script>
  
</head>

<body>

<div id="header" class="container-fluid">
  <h3 class="text-center">Is Metro on schedule?</h3>
  <div id='test' class="text-center">Checking...</div>
</div>
</body>

</html>
